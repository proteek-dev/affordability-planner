import{r as e}from"./chunks/287d4cd9.js";import{r as s}from"./chunks/51671d8f.js";import{n,u as t,J as r}from"./chunks/3a108497.js";import{P as o}from"./chunks/48ed96b1.js";import{c as i}from"./chunks/db79a99c.js";import{E as a}from"./chunks/721a83ad.js";import"./chunks/830b9c7f.js";import"./chunks/566ffb6e.js";import"./chunks/46afd566.js";import"./chunks/2baad0e9.js";import"./chunks/bd774b95.js";import"./chunks/71c39aaf.js";import"./chunks/bb67f8c8.js";import"./chunks/ba1acd14.js";import"./chunks/a1a8acc2.js";import"./chunks/b98171f2.js";import"./chunks/b9aec2b1.js";import"./chunks/2d3f787c.js";import"./chunks/541a8ad6.js";import"./chunks/92c97e32.js";import"./chunks/5fdda34a.js";const u=({notice:s})=>{const n=s.id,t=e.useRef(null);return e.createElement("div",{id:n,ref:t,className:i("notice","notice--"+s.type),role:"status","data-outage-message":s.type},s.edit_url&&e.createElement(a,{href:s.edit_url}),s.title&&e.createElement("h2",null,s.title),e.createElement("div",{dangerouslySetInnerHTML:{__html:s.body}}))};u.propTypes={notice:o.shape(n).isRequired};const c=({bundle:s="",uuid:n="",keywords:r=[],systems:o=[],agencies:i=[],regions:a=[],scTypes:c=[],tags:d=[]})=>{const l=window.location.pathname,{data:m}=t();e.useEffect(()=>{if(!m)return;const e=new CustomEvent("snsw_notice_fetch",{detail:m});window.dispatchEvent(e)},[m]);const p=e=>"node:transaction"===s&&((e=>o.some(s=>{var n,t;return null===(n=e.transaction)||void 0===n||null===(t=n.showOnSystem)||void 0===t?void 0:t.includes(s)}))(e)||(e=>i.some(s=>{var n,t;return null===(n=e.transaction)||void 0===n||null===(t=n.showOnAgency)||void 0===t?void 0:t.includes(s)}))(e)),v=e=>"node:store"===s&&((e=>a.some(s=>{var n,t;return null===(n=e.store)||void 0===n||null===(t=n.showOnRegion)||void 0===t?void 0:t.includes(s)}))(e)||(e=>c.some(s=>{var n,t;return null===(n=e.store)||void 0===n||null===(t=n.showOnType)||void 0===t?void 0:t.includes(s)}))(e)||(e=>d.some(s=>{var n,t;return null===(n=e.store)||void 0===n||null===(t=n.showOnTag)||void 0===t?void 0:t.includes(s)}))(e)),h=e=>{var t;return((e=>e.global||!1)(e)||(e=>{var n;return null===(n=e.bundles)||void 0===n?void 0:n.includes(s)})(e)||(e=>r.some(s=>{var n;return null===(n=e.keywords)||void 0===n?void 0:n.includes(s)}))(e)||p(e)||v(e)||(e=>{var s;return null===(s=e.showOnContent)||void 0===s?void 0:s.includes(n)})(e))&&!(null!==(t=e.exceptionPaths)&&void 0!==t&&t.includes(l))};return e.createElement("div",null,m&&m.filter(e=>h(e)).map(s=>e.createElement(u,{key:s.id,notice:s})))};c.propTypes={bundle:o.string,uuid:o.string,keywords:o.arrayOf(o.string),systems:o.arrayOf(o.string),agencies:o.arrayOf(o.string),regions:o.arrayOf(o.string),scTypes:o.arrayOf(o.string),tags:o.arrayOf(o.string),edit_url:o.string},(()=>{const n=document.getElementById("notices");s.render(e.createElement(r,null,e.createElement(c,drupalSettings.snsw_notice.filters)),n,()=>n.setAttribute("data-mounted","true"))})();
