import{r as e}from"./chunks/287d4cd9.js";import{r as s}from"./chunks/51671d8f.js";import{b as t,a as n,J as i}from"./chunks/3a108497.js";import{a}from"./chunks/53585c6e.js";import"./chunks/566ffb6e.js";import{P as r}from"./chunks/48ed96b1.js";import{c}from"./chunks/db79a99c.js";import{E as o}from"./chunks/721a83ad.js";import{P as d}from"./chunks/5b0fc0d0.js";import"./chunks/830b9c7f.js";import"./chunks/2baad0e9.js";import"./chunks/bd774b95.js";import"./chunks/71c39aaf.js";import"./chunks/bb67f8c8.js";import"./chunks/46afd566.js";import"./chunks/ba1acd14.js";import"./chunks/a1a8acc2.js";import"./chunks/b98171f2.js";import"./chunks/b9aec2b1.js";import"./chunks/2d3f787c.js";import"./chunks/541a8ad6.js";import"./chunks/92c97e32.js";import"./chunks/5fdda34a.js";const l=({banner:s})=>{const t=s.id,n=e.useRef(null),[i,r]=e.useState(s.dismissible&&sessionStorage.getItem(t));e.useEffect(()=>{if(!n.current||"undefined"==typeof SnswAnalytics||void 0===SnswAnalytics.events)return;const e=n.current.querySelectorAll("a");e&&e.forEach(e=>{e.addEventListener("click",SnswAnalytics.events.noticeClick),e.addEventListener("click",SnswAnalytics.events.sitewideNoticeLinkClick)})},[n]);const d=s.personalisedAttributes&&Object.keys(s.personalisedAttributes).length>0,[l,m]=e.useState(i||d?"none":"block");e.useEffect(()=>{const e=new MutationObserver(e=>{const[{target:{style:s}}]=e;s.display!==l&&m(s.display)});return!i&&n.current&&d&&e.observe(n.current,{attributes:!0,attributeFilter:["style"]}),()=>{e.disconnect()}},[n,l,i,d]);return e.createElement("div",a({id:t,ref:n,className:c("sitewide-notice",{"is-excluded":!s.dismissible,"sitewide-notice--image":s.backgroundImage,["sitewide-notice--"+s.type]:"normal"!==s.type&&!s.backgroundImage,"sitewide-notice--important":s.important,"personalised-variant":d}),role:"status","data-ga4-section-id":"sitewide_notice",style:{display:l},"data-dismiss":i},s.personalisedAttributes),s.backgroundImage&&e.createElement("div",{className:"sitewide-notice__background",dangerouslySetInnerHTML:{__html:s.backgroundImage}}),e.createElement("div",{className:"container"},s.edit_url&&e.createElement(o,{href:s.edit_url}),e.createElement("div",{className:"sitewide-notice__message-large",dangerouslySetInnerHTML:{__html:s.body}}),e.createElement("div",{className:"sitewide-notice__message-small",dangerouslySetInnerHTML:{__html:s.mobileBody}}),s.dismissible&&e.createElement("button",{className:"sitewide-notice__close","aria-label":"Dismiss","aria-controls":t,onClick:()=>{r(!0),m("none"),sessionStorage.setItem(t,"1")}})))};l.propTypes={banner:r.shape(t).isRequired};const m=()=>{const s=window.location.pathname,{data:t}=n();return e.useEffect(()=>{new d(document.getElementById("siteWideBanner"))},[null!=t?t:[]]),e.createElement("div",{className:"personalised-content"},t&&t.filter(e=>!(e.exceptionPaths.includes(s)||e.homepageOnly&&"/"!==s)).map(s=>e.createElement(l,{key:s.id,banner:s})))};s.render(e.createElement(i,null,e.createElement(m,null)),document.getElementById("siteWideBanner"));
