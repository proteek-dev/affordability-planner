import{r as e}from"./chunks/287d4cd9.js";import{r as s}from"./chunks/51671d8f.js";import{u as i,Q as t,a as n}from"./chunks/b98171f2.js";import"./chunks/566ffb6e.js";import{a as r}from"./chunks/d7858003.js";import{P as a}from"./chunks/48ed96b1.js";import{a as o}from"./chunks/53585c6e.js";import{c as d}from"./chunks/db79a99c.js";import{S as c}from"./chunks/3780713e.js";import"./chunks/830b9c7f.js";import"./chunks/2baad0e9.js";import"./chunks/bd774b95.js";import"./chunks/71c39aaf.js";import"./chunks/bb67f8c8.js";import"./chunks/46afd566.js";import"./chunks/ba1acd14.js";import"./chunks/a1a8acc2.js";import"./chunks/b9aec2b1.js";import"./chunks/5e298c90.js";import"./chunks/ef24f90e.js";import"./chunks/de694931.js";import"./chunks/4ee0859d.js";import"./chunks/66d2d0da.js";const u=e.createContext(null),l=async({queryKey:e})=>{var s,i,t,n;const[,a,o]=e,d="/jsonapi/resource/transaction/"+a+(o?"?resourceVersion=id:"+o:""),{data:c}=await r(d);return null!==(s=null===(i=c.data)||void 0===i||null===(t=i.attributes)||void 0===t||null===(n=t.cta_info)||void 0===n?void 0:n.value)&&void 0!==s?s:{}},m=({uuid:s,revisionId:t,queryKey:n,children:r})=>{const{data:a,isLoading:o,error:d}=i([n,s,t],l,{refetchInterval:3e4});return e.createElement(u.Provider,{value:{cta:a,isLoading:o,error:d,queryKey:n}},r)};m.propTypes={uuid:a.string.isRequired,revisionId:a.string.isRequired,queryKey:a.string.isRequired,children:a.node.isRequired};const b=({title:s,url:i,isHidden:t,isExternal:n,isDisabled:r,describedBy:a})=>{if(t)return null;const u={href:i,role:"button","aria-describedby":a,onClick:e=>{c("ctaButtonComponentInteraction")&&SnswAnalytics.events.ctaButtonComponentInteraction(e),c("ctaClick")&&SnswAnalytics.events.ctaClick(e)}};return r&&(delete u.href,u["aria-disabled"]=!0),e.createElement("div",{className:"fixed-cta__action"},e.createElement("a",o({className:d("button","button--large","button--primary",{"is-external":n,"is-internal":!n,"is-disabled":r})},u),s))};b.propTypes={title:a.string,url:a.string,isHidden:a.bool,isExternal:a.bool,isDisabled:a.bool,describedBy:a.string};const p=({message:s,isMessageHidden:i,isDisabled:t,isExternal:n,...r})=>{if(i)return null;const a=s||(t?"This transaction is not available at this time. Try again later.":n?"You'll be taken to another website.":"");return a?e.createElement("div",o({className:d("fixed-cta__message")},r),a):null};p.propTypes={id:a.string,message:a.string,isMessageHidden:a.bool,isDisabled:a.bool,isExternal:a.bool};const h=({...s})=>{var i;const{cta:t}=e.useContext(u),n=((s=null)=>e.useMemo(()=>`${s?s+"-":""}${Math.random().toString(36).substr(-8)}`,[s]))("fixedCtaMessage");return t?null===t.url&&""===t.message||t.isHidden&&t.isMessageHidden?null:e.createElement("div",o({className:d("fixed-cta",{"is-disabled":null!==(i=t.isDisabled)&&void 0!==i&&i})},s),e.createElement("div",{className:"container"},e.createElement(b,o({},t,{describedBy:t.isMessageHidden?null:n})),e.createElement(p,{id:n,message:t.message,isMessageHidden:t.isMessageHidden,isDisabled:t.isDisabled,isExternal:t.isExternal}))):null},f=({uuid:s,revisionId:i})=>{const r=new t,a=e.useRef(null),o=({detail:e})=>{a.current?a.current!==e&&r.invalidateQueries("cta"):a.current=e};return e.useEffect(()=>(window.addEventListener("snsw_notice_fetch",o),()=>{window.removeEventListener("snsw_notice_fetch",o)})),e.createElement(n,{client:r},e.createElement(m,{uuid:s,revisionId:i,queryKey:"cta"},e.createElement(h,null)))};f.propTypes={uuid:a.string.isRequired,revisionId:a.string.isRequired},document.querySelectorAll(".transaction-cta[data-uuid][data-revision-id]").forEach(i=>{s.render(e.createElement(f,{uuid:i.getAttribute("data-uuid"),revisionId:i.getAttribute("data-revision-id")}),i)});
